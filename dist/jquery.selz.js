!function(r){var t=function(e){return"undefined"===r.type(e)||null===e},c=function(e){return t(e)||""===e},s={},n={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300,checkout:!1,redirect:!1},l={},u={supported:function(){if(!("localStorage"in window))return!1;try{var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}(),set:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3600;u.supported&&e&&t&&(window.localStorage.setItem(e,r.isPlainObject(t)?JSON.stringify(t):t),r.isNumeric(n)&&window.localStorage.setItem(e+"_ttl",Date.now()+1e3*n))},get:function(e){if(!u.supported||!u.exists(e)||!u.validity(e))return null;var t=window.localStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(e){return t}},clean:function(){u.supported&&Object.keys(window.localStorage).forEach(function(e){return u.validity(e)})},validity:function(e){return!(e+"_ttl"in window.localStorage&&window.localStorage[e+"_ttl"]<Date.now())||(window.localStorage.removeItem(e),window.localStorage.removeItem(e+"_ttl"),!1)},exists:function(e){return!!u.supported&&(!t(window.localStorage.getItem(e))&&u.validity(e))}};function o(){var o="";return r.each(s.shortDomain,function(e,t){var n=e<s.shortDomain.length-1?",":"";o+="a[href^='"+t+"']"+n}),"string"===r.type(s.longDomain)&&(o+=",a[href*='"+s.longDomain+"']"),o}function d(e,o){o&&Object.keys(o).length&&(l[e].forEach(function(e){var t=e[0],n=e[1];r.isFunction(n)&&n(o),s.checkout?t.data("modal-url",o.CheckoutUrl).attr("href",o.CheckoutUrl):t.data("modal-url",o.Url),r.isFunction(s.onDataReady)&&s.onDataReady(t,o)}),delete l[e])}function e(e){var t=r(this),n=t.data("modal-url");"string"===r.type(n)&&(e.preventDefault(),window._$elz.m.open(n,null),r.isFunction(s.onModalOpen)&&s.onModalOpen(t),u.currentTrigger=t)}function a(e){var t=e.originalEvent,n=t.data;if(t.origin===s.domain&&"string"===r.type(n))try{var o=JSON.parse(n),a={};switch(o.key){case"modal-theme":if(r.each(s.theme,function(e,t){switch(e){case"button":r.each(t,function(e,t){switch(e){case"bg":a.cb=t;break;case"text":a.ct=t}});break;case"checkout":r.each(t,function(e,t){switch(e){case"headerBg":a.chbg=t;break;case"headerText":a.chtx=t}})}}),t.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.keys(a).length?a:null}),s.domain),s.redirect||t.source.postMessage(JSON.stringify({key:"set-redirect",data:s.redirect}),s.domain),r.isFunction(s.getTracking)){var i=s.getTracking(u.currentTrigger);c(i)||t.source.postMessage(JSON.stringify({key:"set-tracking",data:i}),s.domain)}break;case"purchase":r.isFunction(s.onPurchase)&&s.onPurchase(o.data);break;case"processing":r.isFunction(s.onProcessing)&&s.onProcessing(o.data);break;case"modal-close":r.isFunction(s.onClose)&&s.onClose(u.currentTrigger,o.data);break;case"beforeunload":u.checkoutData=o.data}}catch(e){}}function i(){r(document.body).on("click",o(),e),r(window).on("message",a).on("unload",function(){r.isFunction(s.onClose)&&"checkoutData"in s&&s.onClose(u.checkoutData)})}r.selz=function(e){s=r.extend(!0,{},n,e),r.isArray(s.shortDomain)||(s.shortDomain=[s.shortDomain]),window._$elz=window._$elz||{},window._$elz.m=window._$elz.m||{d:s.domain,s:{src:s.domain+"/assets/js/embed/modal.js"}},s.shortDomain.push(s.domain+"/checkout/item/"),r(o()).each(function(e,t){return n=r(t),a=n.attr("href"),i="number"===r.type(s.cache),void(a in l?l[a].push([n,o]):(l[a]=[],l[a].push([n,o]),i&&u.exists(a)?d(a,u.get(a)):r.getJSON(s.domain+"/embed/itemdata?itemurl="+a+"&callback=?",function(e){d(a,e),i&&u.set(a,e,s.cache)}).fail(function(){throw new Error("We could not find a matching item for that link")})));var n,o,a,i}),"undefined"===r.type(window._$elz.m.open)?r.getScript(window._$elz.m.s.src,i):i()}}(window.jQuery);