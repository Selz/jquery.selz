!function(s){var l={},t={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300,checkout:!1,redirect:!1},n=function(e){return"undefined"===s.type(e)||null===e},u=function(e){return n(e)||""===e},h=function(e,t){var n=e.length;return e.substring(n-t.length,n)===t},r={},d={supported:function(){if(!("localStorage"in window))return!1;try{var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}(),set:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3600;d.supported&&e&&t&&(window.localStorage.setItem(e,s.isPlainObject(t)?JSON.stringify(t):t),s.isNumeric(n)&&window.localStorage.setItem(e+"_ttl",Date.now()+1e3*n))},get:function(e){if(!d.supported||!d.exists(e)||!d.validity(e))return null;var t=window.localStorage.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch(e){return t}},clean:function(){d.supported&&Object.keys(window.localStorage).forEach(function(e){return d.validity(e)})},validity:function(e){return!(e+"_ttl"in window.localStorage&&window.localStorage[e+"_ttl"]<Date.now())||(window.localStorage.removeItem(e),window.localStorage.removeItem(e+"_ttl"),!1)},exists:function(e){return!!d.supported&&(!n(window.localStorage.getItem(e))&&d.validity(e))}};function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.location.href,t=document.createElement("a");t.href=e;var n={host:t.host,hostname:t.hostname,hash:t.hash,protocol:t.protocol,pathname:0!==t.pathname.indexOf("/")?"/"+t.pathname:t.pathname,search:t.search},o=n.pathname.split("/");return n.filename=o[o.length-1],n}function o(){var o="";return s.each(l.shortDomain,function(e,t){var n=e<l.shortDomain.length-1?",":"";o+="a[href^='"+t+"']"+n}),"string"===s.type(l.longDomain)&&(o+=",a[href*='"+l.longDomain+"']"),o}function i(e,o){o&&Object.keys(o).length&&(r[e].forEach(function(e){var t=e[0],n=e[1];s.isFunction(n)&&n(o),l.checkout?t.data("modal-url",o.CheckoutUrl).attr("href",o.CheckoutUrl):t.data("modal-url",o.Url),s.isFunction(l.onDataReady)&&l.onDataReady(t,o)}),delete r[e])}function e(e){var t=s(this),n=t.data("modal-url"),o=window._$elz.m.open;"string"===s.type(n)&&(e.preventDefault(),o(n),s.isFunction(l.onModalOpen)&&l.onModalOpen(t),d.currentTrigger=t)}function a(e){var t=e.originalEvent,n=t.data,o=m(t.origin),a=m(l.domain);if((o.host===a.host||h(o.host,"."+a.host))&&"string"===s.type(n))try{var r=JSON.parse(n),i={};switch(r.key){case"modal-theme":if(s.each(l.theme,function(e,t){switch(e){case"button":s.each(t,function(e,t){switch(e){case"bg":i.cb=t;break;case"text":i.ct=t}});break;case"checkout":s.each(t,function(e,t){switch(e){case"headerBg":i.chbg=t;break;case"headerText":i.chtx=t}})}}),t.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.keys(i).length?i:null}),t.origin),l.redirect||t.source.postMessage(JSON.stringify({key:"set-redirect",data:l.redirect}),t.origin),s.isFunction(l.getTracking)){var c=l.getTracking(d.currentTrigger);u(c)||t.source.postMessage(JSON.stringify({key:"set-tracking",data:c}),t.origin)}break;case"purchase":s.isFunction(l.onPurchase)&&l.onPurchase(r.data);break;case"processing":s.isFunction(l.onProcessing)&&l.onProcessing(r.data);break;case"modal-close":s.isFunction(l.onClose)&&l.onClose(d.currentTrigger,r.data);break;case"beforeunload":d.checkoutData=r.data}}catch(e){}}function c(){s(document.body).on("click",o(),e),s(window).on("message",a).on("unload",function(){s.isFunction(l.onClose)&&"checkoutData"in l&&l.onClose(d.checkoutData)})}s.selz=function(e){l=s.extend(!0,{},t,e),s.isArray(l.shortDomain)||(l.shortDomain=[l.shortDomain]),window._$elz=window._$elz||{},window._$elz.m=window._$elz.m||{d:l.domain,s:{src:l.domain+"/assets/js/embed/modal.js"}},l.shortDomain.push(l.domain+"/checkout/item/"),s(o()).each(function(e,t){return function(e,t){var n=e.attr("href"),o="number"===s.type(l.cache);if(n in r)r[n].push([e,t]);else if(r[n]=[],r[n].push([e,t]),o&&d.exists(n))i(n,d.get(n));else{var a=l.domain;s.getJSON(a+"/embed/itemdata?v=1.0.17&itemurl="+n+"&callback=?",function(e){i(n,e),o&&d.set(n,e,l.cache)}).fail(function(){throw new Error("We could not find a matching item for that link")})}}(s(t))}),"undefined"===s.type(window._$elz.m.open)?s.getScript(window._$elz.m.s.src,c):c()}}(window.jQuery);