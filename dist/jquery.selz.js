!function(r){var c=function(e){return t=e,"undefined"===r.type(t)||null===t||""===e;var t},s={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300,checkout:!1,redirect:!1},l={},u={supported:function(){if(!("localStorage"in window))return!1;try{var e="___support_test";window.localStorage.setItem(e,e);var t=window.localStorage.getItem(e);return window.localStorage.removeItem(e),t===e}catch(e){return!1}},set:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3600;u.supported()&&e&&t&&(window.localStorage.setItem(e,r.isPlainObject(t)?JSON.stringify(t):t),r.isNumeric(o)&&window.localStorage.setItem(e+"_ttl",Date.now()+1e3*o))},get:function(t){if(!u.supported()||!u.exists(t)||!u.validity(t))return null;var o=void 0;try{o=JSON.parse(window.localStorage.getItem(t))}catch(e){o=window.localStorage.getItem(t)}return o},clean:function(){u.supported()&&Object.keys(window.localStorage).forEach(function(e){u.validity(e)})},validity:function(e){return!(e+"_ttl"in window.localStorage&&window.localStorage[e+"_ttl"]<Date.now())||(window.localStorage.removeItem(e),window.localStorage.removeItem(e+"_ttl"),!1)},exists:function(e){return!!u.supported()&&e in window.localStorage}};function t(){var o="";return r.each(s.shortDomain,function(e,t){o+="a[href^='"+t+"']"+(e<s.shortDomain.length-1?",":"")}),"string"===r.type(s.longDomain)&&(o+=",a[href*='"+s.longDomain+"']"),o}function d(e){var n=u.get(e);n&&Object.keys(n).length&&(l[e].forEach(function(e){var t=e[0],o=e[1];r.isFunction(o)&&o(n),s.checkout?t.data("modal-url",n.CheckoutUrl).attr("href",n.CheckoutUrl):t.data("modal-url",n.Url),r.isFunction(s.onDataReady)&&s.onDataReady(t,n)}),delete l[e])}function e(e){var t=r(this),o=t.data("modal-url");"string"===r.type(o)&&(e.preventDefault(),window._$elz.m.open(o,null),r.isFunction(s.onModalOpen)&&s.onModalOpen(t),u.currentTrigger=t)}function o(e){var t=e.originalEvent,o=t.data;if(t.origin===s.domain&&"string"===r.type(o))try{var n=JSON.parse(o),a={};switch(n.key){case"modal-theme":if(r.each(s.theme,function(e,t){switch(e){case"button":r.each(t,function(e,t){switch(e){case"bg":a.cb=t;break;case"text":a.ct=t}});break;case"checkout":r.each(t,function(e,t){switch(e){case"headerBg":a.chbg=t;break;case"headerText":a.chtx=t}})}}),t.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.keys(a).length?a:null}),s.domain),s.redirect||t.source.postMessage(JSON.stringify({key:"set-redirect",data:s.redirect}),s.domain),r.isFunction(s.getTracking)){var i=s.getTracking(u.currentTrigger);c(i)||t.source.postMessage(JSON.stringify({key:"set-tracking",data:i}),s.domain)}break;case"purchase":r.isFunction(s.onPurchase)&&s.onPurchase(n.data);break;case"processing":r.isFunction(s.onProcessing)&&s.onProcessing(n.data);break;case"modal-close":r.isFunction(s.onClose)&&s.onClose(u.currentTrigger,n.data);break;case"beforeunload":u.checkoutData=n.data}}catch(e){}}function n(){r(document.body).on("click",t(),e),r(window).on("message",o).on("unload",function(){r.isFunction(s.onClose)&&"checkoutData"in s&&s.onClose(u.checkoutData)})}window._$elz=window._$elz||{},window._$elz.m=window._$elz.m||{d:s.domain,s:{src:s.domain+"/assets/js/embed/modal.js"}},"undefined"===r.type(window._$elz.m.open)?r.getScript(window._$elz.m.s.src,n):n(),r.selz=function(e){r.extend(!0,s,e),r.isArray(s.shortDomain)||(s.shortDomain=[s.shortDomain]),s.shortDomain.push(s.domain+"/checkout/item/"),r(t()).each(function(e,t){var o,n,a,i;o=r(t),a=o.attr("href"),i="number"===r.type(s.cache),a in l?l[a].push([o,n]):(l[a]=[],l[a].push([o,n]),i&&u.exists(a)?d(a):r.getJSON(s.domain+"/embed/itemdata?itemurl="+a+"&callback=?",function(e){i&&u.set(a,e,s.cache),d(a)}).fail(function(){throw new Error("We could not find a matching item for that link")}))})}}(window.jQuery);