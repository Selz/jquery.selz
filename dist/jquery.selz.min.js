!function(e){"use strict";function n(){e(document.body).on("click",o(),i),e(window).on("message",r).on("unload",function(){e.isFunction(c.onClose)&&"checkoutData"in c&&c.onClose(l.checkoutData)})}function t(e){return"undefined"==typeof e||null===e||""===e}function o(){var n="";return e.each(c.shortDomain,function(e,t){n+="a[href^='"+t+"']"+(e<c.shortDomain.length-1?",":"")}),"string"==typeof c.longDomain&&(n+=",a[href*='"+c.longDomain+"']"),n}function a(n,t){function o(n){if(a in s){for(var o=s[a].length-1;o>=0;o--){var i=s[a][o][0];t=s[a][o][1],e.isFunction(t)&&t(n),e.isFunction(c.onDataReady)&&c.onDataReady(i,n),i.data("modal-url",n.Url)}delete s[a]}}var a=n.attr("href"),i="number"==typeof c.cache;return a in s?void s[a].push([n,t]):(s[a]=[],s[a].push([n,t]),void(i&&l.exists(a)?o(l.get(a)):e.getJSON(c.domain+"/embed/itemdata/?itemurl="+a+"&callback=?",function(e){i&&l.set(a,e,c.cache),o(e)}).fail(function(){"console"in window&&console.warn("We couldn't find a matching item for that link.")})))}function i(n){var t=e(this),o=t.data("modal-url");"string"==typeof o&&(n.preventDefault(),window._$elz.m.open(o,null),e.isFunction(c.onModalOpen)&&c.onModalOpen(t),l.currentTrigger=t)}function r(n){n=n.originalEvent;var o=n.data;if(n.origin===c.domain&&"string"==typeof o)try{var a=JSON.parse(o);switch(a.key){case"modal-theme":var i={};if(e.each(c.theme,function(n,t){switch(n){case"button":e.each(t,function(e,n){switch(e){case"bg":i.cb=n;break;case"text":i.ct=n}});break;case"checkout":e.each(t,function(e,n){switch(e){case"headerBg":i.chbg=n;break;case"headerText":i.chtx=n}})}}),n.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.size(i)?i:null}),c.domain),e.isFunction(c.getTracking)){var r=c.getTracking(l.currentTrigger);t(r)||n.source.postMessage(JSON.stringify({key:"set-tracking",data:r}),c.domain)}break;case"purchase":e.isFunction(c.onPurchase)&&c.onPurchase(a.data);break;case"processing":e.isFunction(c.onProcessing)&&c.onProcessing(a.data);break;case"modal-close":e.isFunction(c.onClose)&&c.onClose(l.currentTrigger,a.data);break;case"beforeunload":l.checkoutData=a.data}}catch(s){}}window._$elz=window._$elz||{};var c={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300},s={},l={supported:function(){return"localStorage"in window},set:function(e,n,t){this.supported&&"undefined"!=typeof e&&("boolean"==typeof t&&!t||"number"==typeof t||(t=3600),null!==n&&"object"==typeof n&&(n=JSON.stringify(n)),window.localStorage[e]=n,("boolean"!=typeof t||t)&&(window.localStorage[e+"_ttl"]=Date.now()+1e3*t))},get:function(e){if(!this.supported||!this.exists(e))return null;var n;try{n=JSON.parse(window.localStorage[e])}catch(t){n=window.localStorage[e]}return n},clean:function(){if(this.supported)for(var e in window.localStorage)this.validity(e)},validity:function(e){return e+"_ttl"in window.localStorage&&window.localStorage[e+"_ttl"]<Date.now()?(delete window.localStorage[e],delete window.localStorage[e+"_ttl"],!1):!0},exists:function(e){return this.supported&&this.validity(e)?e in window.localStorage:!1}};Object.size=function(e){var n,t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t},window._$elz.m=window._$elz.m||{s:{src:c.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?e.getScript(window._$elz.m.s.src,function(){n()}):n(),e.selz=function(n){e.extend(!0,c,n),e.isArray(c.shortDomain)||(c.shortDomain=[c.shortDomain]),e(o()).each(function(){a(e(this))})}}(window.jQuery);