!function(n){"use strict";function e(){n(document.body).on("click",o(),c),n(window).on("message",r).on("unload",function(){n.isFunction(u.onClose)&&"checkoutData"in u&&u.onClose(l.checkoutData)})}function t(n){return"undefined"==typeof n||null===n||""===n}function o(){var e="";return n.each(u.shortDomain,function(n,t){e+="a[href^='"+t+"']"+(n<u.shortDomain.length-1?",":"")}),"string"==typeof u.longDomain&&(e+=",a[href*='"+u.longDomain+"']"),e}function a(e,t){"undefined"!=typeof l.items[e.attr("href")]?i(e,l.items[e.attr("href")],t,!1):n.getJSON(u.domain+"/embed/itemdata/?itemurl="+e.attr("href")+"&callback=?",function(n){e.data("modal-url",n.Url),l.items[e.attr("href")]=n,i(e,n,t,!0)}).fail(function(){"console"in window&&console.warn("We couldn't find a matching item for that link.")})}function i(e,t,o,a){n.isFunction(o)&&o(t),n.isFunction(u.onDataReady)&&a&&u.onDataReady(e,t)}function c(e){var t=n(this),o=t.data("modal-url");e.preventDefault(),"string"==typeof o&&o.length>0?window._$elz.m.open(o,null):a(t,function(n){window._$elz.m.open(n.Url,null)}),n.isFunction(u.onModalOpen)&&u.onModalOpen(t),l.currentTrigger=t}function r(e){e=e.originalEvent;var o=e.data;if(e.origin===u.domain&&"string"==typeof o)try{var a=JSON.parse(o);switch(a.key){case"modal-theme":var i={};if(n.each(u.theme,function(e,t){switch(e){case"button":n.each(t,function(n,e){switch(n){case"bg":i.cb=e;break;case"text":i.ct=e}});break;case"checkout":n.each(t,function(n,e){switch(n){case"headerBg":i.chbg=e;break;case"headerText":i.chtx=e}})}}),e.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.size(i)?i:null}),u.domain),n.isFunction(u.getTracking)){var c=u.getTracking(l.currentTrigger);t(c)||e.source.postMessage(JSON.stringify({key:"set-tracking",data:c}),u.domain)}break;case"purchase":n.isFunction(u.onPurchase)&&u.onPurchase(a.data);break;case"processing":n.isFunction(u.onProcessing)&&u.onProcessing(a.data);break;case"modal-close":n.isFunction(u.onClose)&&u.onClose(l.currentTrigger,a.data);break;case"beforeunload":l.checkoutData=a.data}}catch(r){}}function s(){n("a[href^='"+u.shortDomain+"/']").each(function(){a(n(this),null)})}window._$elz=window._$elz||{};var u={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",prefetch:!1,items:{},theme:{}},l={items:{}};Object.size=function(n){var e,t=0;for(e in n)n.hasOwnProperty(e)&&t++;return t},window._$elz.m=window._$elz.m||{s:{src:u.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?n.getScript(window._$elz.m.s.src,function(){e()}):e(),n.selz=function(e){n.extend(!0,u,e),n.isArray(u.shortDomain)||(u.shortDomain=[u.shortDomain]),s()}}(window.jQuery);