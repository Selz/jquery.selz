!function(e){"use strict";function n(){e(document.body).on("click","a[href^='"+s.shortDomain.join(",")+"']",i),e(window).on("message",c).on("unload",function(){e.isFunction(s.onClose)&&"checkoutData"in s&&s.onClose(u.checkoutData)})}function t(e){return"undefined"==typeof e||null===e||""===e}function o(n,t){"undefined"!=typeof u.items[n.attr("href")]?a(n,u.items[n.attr("href")],t,!1):e.getJSON(s.domain+"/embed/itemdata/?itemurl="+n.attr("href")+"&callback=?",function(e){n.data("modal-url",e.Url),u.items[n.attr("href")]=e,a(n,e,t,!0)}).fail(function(){"console"in window&&console.warn("We couldn't find a matching item for that link.")})}function a(n,t,o,a){e.isFunction(o)&&o(t),e.isFunction(s.onDataReady)&&a&&s.onDataReady(n,t)}function i(n){var t=e(this),a=t.data("modal-url");n.preventDefault(),"string"==typeof a&&a.length>0?(n.preventDefault(),window._$elz.m.open(a,null)):o(t,function(e){n.preventDefault(),window._$elz.m.open(e.Url,null)}),e.isFunction(s.onModalOpen)&&s.onModalOpen(t),u.currentTrigger=t}function c(n){n=n.originalEvent;var o=n.data;if(n.origin===s.domain&&"string"==typeof o)try{var a=JSON.parse(o);switch(a.key){case"modal-theme":var i={};if(e.each(s.theme,function(n,t){switch(n){case"button":e.each(t,function(e,n){switch(e){case"bg":i.cb=n;break;case"text":i.ct=n}});break;case"checkout":e.each(t,function(e,n){switch(e){case"headerBg":i.chbg=n;break;case"headerText":i.chtx=n}})}}),n.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.size(i)?i:null}),s.domain),e.isFunction(s.getTracking)){var c=s.getTracking(u.currentTrigger);t(c)||n.source.postMessage(JSON.stringify({key:"set-tracking",data:c}),s.domain)}break;case"purchase":e.isFunction(s.onPurchase)&&s.onPurchase(a.data);break;case"processing":e.isFunction(s.onProcessing)&&s.onProcessing(a.data);break;case"modal-close":e.isFunction(s.onClose)&&s.onClose(u.currentTrigger,a.data);break;case"beforeunload":u.checkoutData=a.data}}catch(r){}}function r(){e("a[href^='"+s.shortDomain+"/']").each(function(){o(e(this),null)})}window._$elz=window._$elz||{};var s={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/","https://selz.com/item/"],prefetch:!1,items:{},theme:{}},u={items:{}};Object.size=function(e){var n,t=0;for(n in e)e.hasOwnProperty(n)&&t++;return t},window._$elz.m=window._$elz.m||{s:{src:s.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?e.getScript(window._$elz.m.s.src,function(){n()}):n(),e.selz=function(n){e.extend(!0,s,n),e.isArray(s.shortDomain)||(s.shortDomain=[s.shortDomain]),r()}}(window.jQuery);