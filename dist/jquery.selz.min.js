!function(t){"use strict";function e(){t(document.body).on("click",n(),i),t(window).on("message",r).on("unload",function(){t.isFunction(c.onClose)&&"checkoutData"in c&&c.onClose(l.checkoutData)})}function o(t){return"undefined"==typeof t||null===t||""===t}function n(){var e="";return t.each(c.shortDomain,function(t,o){e+="a[href^='"+o+"']"+(t<c.shortDomain.length-1?",":"")}),"string"==typeof c.longDomain&&(e+=",a[href*='"+c.longDomain+"']"),e}function a(e,o){function n(e){if(a in s){for(var n=s[a].length-1;n>=0;n--){var i=s[a][n][0];o=s[a][n][1],t.isFunction(o)&&o(e),t.isFunction(c.onDataReady)&&c.onDataReady(i,e),i.data("modal-url",e.Url)}delete s[a]}}var a=e.attr("href"),i="number"==typeof c.cache;return a in s?void s[a].push([e,o]):(s[a]=[],s[a].push([e,o]),void(i&&l.exists(a)?n(l.get(a)):t.getJSON(c.domain+"/embed/itemdata/?itemurl="+a+"&callback=?",function(t){i&&l.set(a,t,c.cache),n(t)}).fail(function(){"console"in window&&console.warn("We couldn't find a matching item for that link.")})))}function i(e){var o=t(this),n=o.data("modal-url");"string"==typeof n&&(e.preventDefault(),window._$elz.m.open(n,null),t.isFunction(c.onModalOpen)&&c.onModalOpen(o),l.currentTrigger=o)}function r(e){e=e.originalEvent;var n=e.data;if(e.origin===c.domain&&"string"==typeof n)try{var a=JSON.parse(n);switch(a.key){case"modal-theme":var i={};if(t.each(c.theme,function(e,o){switch(e){case"button":t.each(o,function(t,e){switch(t){case"bg":i.cb=e;break;case"text":i.ct=e}});break;case"checkout":t.each(o,function(t,e){switch(t){case"headerBg":i.chbg=e;break;case"headerText":i.chtx=e}})}}),e.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.size(i)?i:null}),c.domain),t.isFunction(c.getTracking)){var r=c.getTracking(l.currentTrigger);o(r)||e.source.postMessage(JSON.stringify({key:"set-tracking",data:r}),c.domain)}break;case"purchase":t.isFunction(c.onPurchase)&&c.onPurchase(a.data);break;case"processing":t.isFunction(c.onProcessing)&&c.onProcessing(a.data);break;case"modal-close":t.isFunction(c.onClose)&&c.onClose(l.currentTrigger,a.data);break;case"beforeunload":l.checkoutData=a.data}}catch(s){}}window._$elz=window._$elz||{};var c={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300},s={},l={supported:function(){if(!("localStorage"in window))return!1;try{window.localStorage.setItem("___support_test","OK");var t=window.localStorage.getItem("___support_test");return window.localStorage.removeItem("___support_test"),"OK"===t}catch(e){return!1}return!1},set:function(t,e,o){this.supported()&&"undefined"!=typeof t&&("boolean"==typeof o&&!o||"number"==typeof o||(o=3600),null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),window.localStorage.setItem(t,e),("boolean"!=typeof o||o)&&window.localStorage.setItem(t+"_ttl",Date.now()+1e3*o))},get:function(t){if(!this.supported()||!this.exists(t)||!this.validity(t))return null;var e;try{e=JSON.parse(window.localStorage.getItem(t))}catch(o){e=window.localStorage.getItem(t)}return e},clean:function(){if(this.supported())for(var t in window.localStorage)this.validity(t)},validity:function(t){return t+"_ttl"in window.localStorage&&window.localStorage[t+"_ttl"]<Date.now()?(window.localStorage.removeItem(t),window.localStorage.removeItem(t+"_ttl"),!1):!0},exists:function(t){return this.supported()?t in window.localStorage:!1}};Object.size=function(t){var e,o=0;for(e in t)t.hasOwnProperty(e)&&o++;return o},window._$elz.m=window._$elz.m||{s:{src:c.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?t.getScript(window._$elz.m.s.src,function(){e()}):e(),t.selz=function(e){t.extend(!0,c,e),t.isArray(c.shortDomain)||(c.shortDomain=[c.shortDomain]),t(n()).each(function(){a(t(this))})}}(window.jQuery);