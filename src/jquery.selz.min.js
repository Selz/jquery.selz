!function(n){"use strict";function e(){n(document.body).on("click",o(),i),n(window).on("message",r).on("unload",function(){n.isFunction(c.onClose)&&"checkoutData"in c&&c.onClose(l.checkoutData)})}function t(n){return"undefined"==typeof n||null===n||""===n}function o(){var e="";return n.each(c.shortDomain,function(n,t){e+="a[href^='"+t+"']"+(n<c.shortDomain.length-1?",":"")}),"string"==typeof c.longDomain&&(e+=",a[href*='"+c.longDomain+"']"),e}function a(e,t){function o(e){if(a in s){for(var o=s[a].length-1;o>=0;o--){var i=s[a][o][0];t=s[a][o][1],n.isFunction(t)&&t(e),n.isFunction(c.onDataReady)&&c.onDataReady(i,e),i.data("modal-url",e.Url)}delete s[a]}}var a=e.attr("href"),i="number"==typeof c.cache;return a in s?void s[a].push([e,t]):(s[a]=[],s[a].push([e,t]),void(i&&l.exists(a)?o(l.get(a)):n.getJSON(c.domain+"/embed/itemdata/?itemurl="+a+"&callback=?",function(n){i&&l.set(a,n,c.cache),o(n)}).fail(function(){"console"in window&&console.warn("We couldn't find a matching item for that link.")})))}function i(e){var t=n(this),o=t.data("modal-url");"string"==typeof o&&(e.preventDefault(),window._$elz.m.open(o,null),n.isFunction(c.onModalOpen)&&c.onModalOpen(t),l.currentTrigger=t)}function r(e){e=e.originalEvent;var o=e.data;if(e.origin===c.domain&&"string"==typeof o)try{var a=JSON.parse(o);switch(a.key){case"modal-theme":var i={};if(n.each(c.theme,function(e,t){switch(e){case"button":n.each(t,function(n,e){switch(n){case"bg":i.cb=e;break;case"text":i.ct=e}});break;case"checkout":n.each(t,function(n,e){switch(n){case"headerBg":i.chbg=e;break;case"headerText":i.chtx=e}})}}),e.source.postMessage(JSON.stringify({key:"modal-theme",data:Object.size(i)?i:null}),c.domain),n.isFunction(c.getTracking)){var r=c.getTracking(l.currentTrigger);t(r)||e.source.postMessage(JSON.stringify({key:"set-tracking",data:r}),c.domain)}break;case"purchase":n.isFunction(c.onPurchase)&&c.onPurchase(a.data);break;case"processing":n.isFunction(c.onProcessing)&&c.onProcessing(a.data);break;case"modal-close":n.isFunction(c.onClose)&&c.onClose(l.currentTrigger,a.data);break;case"beforeunload":l.checkoutData=a.data}}catch(s){}}window._$elz=window._$elz||{};var c={domain:"https://selz.com",shortDomain:["http://selz.co/","http://bit.ly/"],longDomain:".selz.com/item/",theme:{},cache:300},s={},l={supported:function(){return"localStorage"in window},set:function(n,e,t){this.supported&&"undefined"!=typeof n&&("boolean"==typeof t&&!t||"number"==typeof t||(t=3600),null!==e&&"object"==typeof e&&(e=JSON.stringify(e)),window.localStorage[n]=e,("boolean"!=typeof t||t)&&(window.localStorage[n+"_ttl"]=Date.now()+1e3*t))},get:function(n){if(!this.supported)return null;if(!(n in window.localStorage))return null;if(!this.validity(n))return null;var e;try{e=JSON.parse(window.localStorage[n])}catch(t){e=window.localStorage[n]}return e},clean:function(){if(this.supported)for(var n in window.localStorage)this.validity(n)},validity:function(n){return n+"_ttl"in window.localStorage&&window.localStorage[n+"_ttl"]<Date.now()?(delete window.localStorage[n],delete window.localStorage[n+"_ttl"],!1):!0},exists:function(n){return this.supported?n in window.localStorage:!1}};Object.size=function(n){var e,t=0;for(e in n)n.hasOwnProperty(e)&&t++;return t},window._$elz.m=window._$elz.m||{s:{src:c.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?n.getScript(window._$elz.m.s.src,function(){e()}):e(),n.selz=function(e){n.extend(!0,c,e),n.isArray(c.shortDomain)||(c.shortDomain=[c.shortDomain]),n(o()).each(function(){a(n(this))})}}(window.jQuery);