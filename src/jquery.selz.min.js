!function(n){"use strict";function t(){n(document.body).on("click","a[href^='"+d.shortDomain+"/']",i),n(window).on("message",a).on("unload",function(){n.isFunction(d.settings.onClose)&&"checkoutData"in d&&d.settings.onClose(d.checkoutData)})}function e(n){return"undefined"==typeof n||null===n||""===n}function o(t,e){"undefined"!=typeof d.items[t.attr("href")]?s(t,d.items[t.attr("href")],e,!1):n.getJSON(d.domain+"/embed/itemdata/?itemurl="+t.attr("href")+"&callback=?",function(n){t.data("modal-url",n.Url),d.items[t.attr("href")]=n,s(t,n,e,!0)}).fail(function(){console.error("Woops. It looks like your link is to a product that can't be found!")})}function s(t,e,o,s){n.isFunction(o)&&o(e),n.isFunction(d.settings.onDataReady)&&s&&d.settings.onDataReady(t,e)}function i(t){var e=n(t.target),s=e.data("modal-url");"string"==typeof s&&s.length>0?window._$elz.m.open(s,null):o(e,function(n){window._$elz.m.open(n.Url,null)}),n.isFunction(d.settings.onModalOpen)&&d.settings.onModalOpen(e),d.currentTrigger=e,t.preventDefault()}function a(t){t=t.originalEvent;var o=t.data;if(t.origin===d.domain&&"string"==typeof o)try{var s=JSON.parse(o);switch(s.key){case"modal-theme":if(null!==d.settings.colors&&(t.source.postMessage(JSON.stringify({key:"modal-theme",data:{ct:d.settings.colors.buttonText,cb:d.settings.colors.buttonBg,chbg:d.settings.colors.checkoutHeaderBg,chtx:d.settings.colors.checkoutHeaderText}}),d.domain),n.isFunction(d.settings.getTracking))){var i=d.settings.getTracking(d.currentTrigger);e(i)||t.source.postMessage(JSON.stringify({key:"set-tracking",data:i}),d.domain)}break;case"purchase":n.isFunction(d.settings.onPurchase)&&d.settings.onPurchase(s.data);break;case"processing":n.isFunction(d.settings.onProcessing)&&d.settings.onProcessing(s.data);break;case"modal-close":n.isFunction(d.settings.onClose)&&d.settings.onClose(s.data);break;case"beforeunload":d.checkoutData=s.data}}catch(a){}}function c(n,t){"string"==typeof t&&t.length>0&&(null===d.settings.colors&&(d.settings.colors={}),d.settings.colors[n]=t)}function r(){n("a[href^='"+d.shortDomain+"/']").each(function(t,e){o(n(e),null)})}window._$elz=window._$elz||{};var d={domain:"https://selz.com",shortDomain:"http://selz.co",settings:{colors:null,prefetch:!1},items:{}};window._$elz.m=window._$elz.m||{s:{src:d.domain+"/assets/js/embed/modal.js"}},"undefined"==typeof window._$elz.m.open?n.getScript(window._$elz.m.s.src,function(){t()}):t(),n.selz=function(n){"undefined"!=typeof n.domain&&(d.domain=n.domain),"undefined"!=typeof n.shortDomain&&(d.shortDomain=n.shortDomain),c("buttonBg",n.buttonBg),c("buttonText",n.buttonText),"undefined"!=typeof n.onDataReady&&(d.settings.onDataReady=n.onDataReady),"undefined"!=typeof n.onModalOpen&&(d.settings.onModalOpen=n.onModalOpen),"undefined"!=typeof n.onPurchase&&(d.settings.onPurchase=n.onPurchase),"undefined"!=typeof n.onProcessing&&(d.settings.onProcessing=n.onProcessing),"undefined"!=typeof n.onClose&&(d.settings.onClose=n.onClose),"undefined"!=typeof n.getTracking&&(d.settings.getTracking=n.getTracking),n.prefetch&&(d.settings.prefetch=!0,r())}}(window.jQuery);